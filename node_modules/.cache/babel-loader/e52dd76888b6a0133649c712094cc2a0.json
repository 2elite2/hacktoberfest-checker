{"ast":null,"code":"import _classCallCheck from\"/Users/ianjenkins/Code/hacktoberfest-checker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _possibleConstructorReturn from\"/Users/ianjenkins/Code/hacktoberfest-checker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/ianjenkins/Code/hacktoberfest-checker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/ianjenkins/Code/hacktoberfest-checker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,Fragment}from'react';import PropTypes from'prop-types';import LoadingIcon from'./LoadingIcon';import ErrorText from'./ErrorText';import pullRequestAmount from'./pullRequestAmount';import ShareButtons from'./ShareButtons';import UserInfo from'./UserInfo';import PullRequest from'./PullRequest';import IssuesLink from'./IssuesLink';import MeLinkInfo from'./MeLinkInfo';var PullRequests=/*#__PURE__*/function(_Component){_inherits(PullRequests,_Component);function PullRequests(){var _getPrototypeOf2;var _this;_classCallCheck(this,PullRequests);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PullRequests)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={loading:true,data:null,error:null};_this.componentDidMount=function(){_this.storeUsernameAsMe();_this.fetchPullRequests();};_this.componentDidUpdate=function(prevProps){if(prevProps.username===_this.props.username)return;_this.fetchPullRequests();};_this.storeUsernameAsMe=function(){var username=_this.props.username;if(localStorage.getItem('myGithub')){return;}localStorage.setItem('myGithub',username);};_this.fetchPullRequests=function(){var username=_this.props.username;var apiUrl=process.env.REACT_APP_API_URL;_this.setState({loading:true});fetch(\"\".concat(apiUrl,\"/prs?username=\").concat(username),{method:'GET'}).then(function(response){return response.json();}).then(function(pullRequests){return _this.setState({loading:false,data:pullRequests});}).catch(function(error){return _this.setState({loading:false,error:error});});};_this.getErrorMessage=function(){var _this$state=_this.state,data=_this$state.data,error=_this$state.error;if(error&&error.description){return error.error_description;}if(data&&data.error_description){return data.error_description;}return\"Couldn't find any data or we hit an error, err try again?\";};_this.render=function(){var username=_this.props.username;var _this$state2=_this.state,loading=_this$state2.loading,data=_this$state2.data,error=_this$state2.error;if(loading){return React.createElement(LoadingIcon,null);}if(error||data.error_description){return React.createElement(ErrorText,{errorMessage:_this.getErrorMessage()});}var isComplete=data.prs.length>=pullRequestAmount;return React.createElement(Fragment,null,React.createElement(\"div\",{className:\"text-center text-white\"},React.createElement(ShareButtons,{username:username,pullRequestCount:data.prs.length}),React.createElement(UserInfo,{username:username,userImage:data.userImage,pullRequestCount:data.prs.length})),React.createElement(\"div\",{className:\"rounded mx-auto shadow overflow-hidden w-5/6 lg:w-1/2 mb-4\"},data.prs.length>0&&data.prs.map(function(pullRequest,i){return React.createElement(PullRequest,{pullRequest:pullRequest,key:i});})),!isComplete&&React.createElement(IssuesLink,null),React.createElement(MeLinkInfo,{username:username}));};return _this;}return PullRequests;}(Component);PullRequests.defaultProps={username:PropTypes.string.isRequired};export{PullRequests as default};","map":{"version":3,"sources":["/Users/ianjenkins/Code/hacktoberfest-checker/src/pages/User/components/PullRequests/index.js"],"names":["React","Component","Fragment","PropTypes","LoadingIcon","ErrorText","pullRequestAmount","ShareButtons","UserInfo","PullRequest","IssuesLink","MeLinkInfo","PullRequests","state","loading","data","error","componentDidMount","storeUsernameAsMe","fetchPullRequests","componentDidUpdate","prevProps","username","props","localStorage","getItem","setItem","apiUrl","process","env","REACT_APP_API_URL","setState","fetch","method","then","response","json","pullRequests","catch","getErrorMessage","description","error_description","render","isComplete","prs","length","userImage","map","pullRequest","i","defaultProps","string","isRequired"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport LoadingIcon from './LoadingIcon';\nimport ErrorText from './ErrorText';\nimport pullRequestAmount from './pullRequestAmount';\nimport ShareButtons from './ShareButtons';\nimport UserInfo from './UserInfo';\nimport PullRequest from './PullRequest';\nimport IssuesLink from './IssuesLink';\nimport MeLinkInfo from './MeLinkInfo';\n\nexport default class PullRequests extends Component {\n  static defaultProps = {\n    username: PropTypes.string.isRequired\n  };\n\n  state = {\n    loading: true,\n    data: null,\n    error: null\n  };\n\n  componentDidMount = () => {\n    this.storeUsernameAsMe();\n    this.fetchPullRequests();\n  };\n\n  componentDidUpdate = prevProps => {\n    if (prevProps.username === this.props.username) return;\n    this.fetchPullRequests();\n  };\n\n  storeUsernameAsMe = () => {\n    const username = this.props.username;\n\n    if (localStorage.getItem('myGithub')) {\n      return;\n    }\n\n    localStorage.setItem('myGithub', username);\n  };\n\n  fetchPullRequests = () => {\n    const username = this.props.username;\n    const apiUrl = process.env.REACT_APP_API_URL;\n\n    this.setState({\n      loading: true\n    });\n\n    fetch(`${apiUrl}/prs?username=${username}`, {\n      method: 'GET'\n    })\n      .then(response => response.json())\n      .then(pullRequests =>\n        this.setState({\n          loading: false,\n          data: pullRequests\n        })\n      )\n      .catch(error =>\n        this.setState({\n          loading: false,\n          error\n        })\n      );\n  };\n\n  getErrorMessage = () => {\n    const { data, error } = this.state;\n\n    if (error && error.description) {\n      return error.error_description;\n    }\n\n    if (data && data.error_description) {\n      return data.error_description;\n    }\n\n    return \"Couldn't find any data or we hit an error, err try again?\";\n  };\n\n  render = () => {\n    const username = this.props.username;\n    const { loading, data, error } = this.state;\n\n    if (loading) {\n      return <LoadingIcon />;\n    }\n\n    if (error || data.error_description) {\n      return <ErrorText errorMessage={this.getErrorMessage()} />;\n    }\n\n    const isComplete = data.prs.length >= pullRequestAmount;\n\n    return (\n      <Fragment>\n        <div className=\"text-center text-white\">\n          <ShareButtons\n            username={username}\n            pullRequestCount={data.prs.length}\n          />\n          <UserInfo\n            username={username}\n            userImage={data.userImage}\n            pullRequestCount={data.prs.length}\n          />\n        </div>\n        <div className=\"rounded mx-auto shadow overflow-hidden w-5/6 lg:w-1/2 mb-4\">\n          {data.prs.length > 0 &&\n            data.prs.map((pullRequest, i) => (\n              <PullRequest pullRequest={pullRequest} key={i} />\n            ))}\n        </div>\n        {!isComplete && <IssuesLink />}\n        <MeLinkInfo username={username} />\n      </Fragment>\n    );\n  };\n}\n"]},"metadata":{},"sourceType":"module"}